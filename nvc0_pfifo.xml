<?xml version="1.0" encoding="UTF-8"?>
<database xmlns="http://nouveau.freedesktop.org/"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://nouveau.freedesktop.org/ rules-ng.xsd">
<import file="copyright.xml"/>

<import file="nvchipsets.xml" />
<import file="nv50_defs.xml" />

<domain name="NV_MMIO" bare="yes" prefix="chipset">

<array name="PFIFO" offset="0x2000" stride="0x2000" length="1" variants="NVC0-">
	<bitset name="nvc0_pfifo_intr" inline="yes">
		<bitfield pos="28" name="VM_FAULT"/>
	</bitset>
	<reg32 offset="0x100" name="INTR" type="nvc0_pfifo_intr"/>
	<reg32 offset="0x140" name="INTR_EN" type="nvc0_pfifo_intr"/>
	<reg32 offset="0x204" name="SUBFIFO_ENABLE">
		<bitfield pos="0" name="0"/>
		<bitfield pos="1" name="1"/>
		<bitfield pos="2" name="2"/>
	</reg32>
	<reg32 offset="0x208" name="ENG_SUBFIFO_MASK" length="6">
		<doc>If bit x of reg y is 0, then engine y can be used by subfifo x,
		if it's 1 then it cannot.</doc>
	</reg32>
	<reg32 offset="0x254" name="POLL_AREA">
		<bitfield low="0" high="27" name="ADDR" shr="12"/>
		<bitfield pos="28" name="UNK28"/>
		<bitfield pos="31" name="UNK31"/>
	</reg32>
	<reg32 offset="0x270" name="PLAYLIST">
		<bitfield high="27" low="0" name="ADDRESS" shr="12"/>
		<bitfield high="29" low="28" name="TARGET" type="nv50_mem_target"/>
	</reg32>
	<reg32 offset="0x59c" name="VM_FAULT_SOURCE">
		<bitfield pos="0" name="PGRAPH"/>
		<bitfield pos="3" name="PEEPHOLE"/>
		<bitfield pos="4" name="BAR1"/>
		<bitfield pos="5" name="BAR3"/>
		<bitfield pos="7" name="PFIFO"/>
	</reg32>
	<reg32 offset="0x630" name="ENG_FREEZE">
		<bitfield pos="0" name="PGRAPH"/>
		<!-- speculation... -->
		<bitfield pos="1" name="PVP"/>
		<bitfield pos="2" name="PPPP"/>
		<bitfield pos="3" name="PBSP"/>
		<bitfield pos="4" name="PCOPY0"/>
		<bitfield pos="5" name="PCOPY1"/>
	</reg32>
	<array offset="0x800" name="VM_FAULT" length="32" stride="0x10"> <!-- length is guess. -->
		<reg32 offset="0" name="CHAN" type="nv50_channel"/>
		<reg32 offset="4" name="ADDR_LOW"/>
		<reg32 offset="8" name="ADDR_HIGH"/>
		<reg32 offset="0xc" name="FLAGS">
			<bitfield low="0" high="3" name="REASON">
				<value value="0" name="PT_NOT_PRESENT"/>
				<value value="1" name="PT_TOO_SHORT"/>
				<value value="2" name="PAGE_NOT_PRESENT"/>
				<value value="3" name="VSPACE_LIMIT"/>
				<!-- ... -->
			</bitfield>
			<bitfield low="4" high="6" name="UNK4"/>
			<bitfield pos="7" name="WRITE"/>
			<bitfield low="8" high="12" name="SUBUNIT">
				<!-- need more variant power! -->
			</bitfield>
		</reg32>
	</array>
	<array offset="0x1000" name="CHAN_TABLE" length="128" stride="8">
		<reg32 offset="0" name="CHAN">
			<bitfield low="0" high="29" name="INST" type="nv50_channel"/>
			<bitfield pos="30" name="UNK30"/>
			<bitfield pos="31" name="UNK31"/>
		</reg32>
		<reg32 offset="4" name="STATE">
			<bitfield pos="0" name="ENABLE"/>
			<bitfield pos="8" name="UNK8"/>
			<bitfield pos="12" name="UNK12"/>
			<bitfield low="16" high="20" name="UNK16"/>
			<bitfield pos="28" name="UNK28"/>
		</reg32>
	</array>
</array>

<array name="PSUBFIFO" offset="0x40000" stride="0x2000" length="3" variants="NVC0-">

</array>

</domain>

</database>
